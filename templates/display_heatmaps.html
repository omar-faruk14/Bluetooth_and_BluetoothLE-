<!-- display_heatmaps.html -->
{% extends "layout.html" %}
{% block content %}
{% load static %}
<main id="main">

  <!-- ======= Breadcrumbs ======= -->
  <div class="breadcrumbs">
    <div class="page-header d-flex align-items-center" style="background-image: url('');">
      <div class="container position-relative">
        <div class="row d-flex justify-content-center">
          <div class="col-lg-6 text-center">
            <h2>BLE Heatmaps</h2>
          </div>
        </div>
      </div>
    </div>
    <nav>
      <div class="container">
        <ol>
          <li><a href="{% url 'home' %}">Home</a></li>
          <li>Find People</li>
        </ol>
      </div>
    </nav>
  </div><!-- End Breadcrumbs -->

  <br>

  <div class="container">
    <div class="row text-center">
      <div class="col">
        <div class="container">
          <div class="row">
            <div class="col-12">
              
              <a class="btn btn-success custom-button" href="{%url 'settings'%}">Genarate Heatmaps</a>

            </div>
          </div>
        </div>
      </div>
      <div class="col-6">
        <div class="container">
          <div class="row">
            <div class="col-12">

        <form method="POST" action="{% url 'remove_heatmap_files' %}">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger p-2">Remove Heatmap Files</button>
        </form>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="container">
    <div class="row">
      <div class="col-md-6 offset-md-3">
        <h1 class="mt-5 mb-3">Display Heatmaps</h1>
        {% if heatmap_data %}
          {% for heatmap in heatmap_data %}
            <h3>Timestamp: {{ heatmap.timestamp }}</h3>
            <img src="data:image/png;base64,{{ heatmap.image }}" alt="Heatmap" class="img-fluid mb-4">
          {% endfor %}
        {% else %}
          <p>No heatmaps to display.</p>
        {% endif %}
        
        <form method="POST" action="{% url 'remove_heatmap_files' %}">
          {% csrf_token %}
          
        </form>
      </div>
    </div>
  </div>
</main><!-- End #main -->
{% endblock %}
